# 数据类型

### **Solidity 数据类型分类及存储方式**

#### 1、值类型 (Value Types)

值类型直接存储其数据的值，变量本身保存了数据的副本，而不是对数据的引用。

- **整型 (Integers)**：
  - `int` 和 `uint`：有符号和无符号整数，分别用于存储负数和正数。
  - 例如：`int8`, `int16`, `int32`, ..., `int256`, `uint8`, `uint256` 等。
  - **存储方式**：整数类型通常存储在 **`storage`** 或 **`stack`** 中。
- **布尔类型 (Boolean)**：
  - `bool`：用于存储 `true` 或 `false`。
  - **存储方式**：存储在 **`storage`** 或 **`stack`** 中。
- **地址类型 (Address)**：
  - `address`：用于存储以太坊地址，大小为 20 字节。
  - **存储方式**：存储在 **`storage`** 或 **`stack`** 中。
- **固定大小字节数组 (Fixed-Size Byte Arrays)**：
  - `bytes1`, `bytes2`, ..., `bytes32`：用于存储固定大小的字节数据。
  - **存储方式**：存储在 **`storage`** 或 **`stack`** 中。

#### 2、引用类型 (Reference Types)

引用类型变量存储的是数据的 **引用**，而不是数据本身。

- **动态大小字节数组 (Dynamic-Size Byte Arrays)**：
  - `bytes` 和 `string`：分别用于存储可变长度的字节数组和字符串。
  - 存储方式：
    - 它们通常存储在 **`storage`** 中，但数据本身通常是动态的，可以扩展或收缩，存储时会被引用。
- **数组 (Arrays)**：
  - `type[]`：可用于存储动态或固定长度的数组。
  - 存储方式：数组的元素存储在 `storage` 中。
    - 动态数组通常存储在 **`storage`**。
    - 固定大小的数组可以存储在 **`storage`** 或 **`stack`**。
- **映射 (Mappings)**：
  - `mapping(keyType => valueType)`：映射用于存储键值对。每个映射元素的地址都是动态分配的。
  - **存储方式**：映射本身存储在 **`storage`** 中，元素值在访问时动态计算并存储。

#### 3、存储位置

Solidity 中的变量可以存储在三种位置之一：**`stack`**、**`memory`** 和 **`storage`**。

- **`storage`**：
  - **持久化存储**：所有合约状态变量（即合约内的变量）都存储在 **`storage`** 中。数据会在交易结束后持久保存。
  - **存储机制**：`storage` 存储数据是持久的，并且可以跨交易持久化。它消耗较高的 gas，因为每次修改都需要对链上的数据进行更新。
- **`memory`**：
  - **临时存储**：`memory` 用于存储临时变量，这些变量仅在函数执行期间存在。当函数执行完成后，数据会被清除。
  - **存储机制**：`memory` 相比于 `storage` 更便宜，因为数据存储在内存中，而不是链上的持久化存储。通常用来存储函数参数、局部变量和临时结果。
- **`stack`**：
  - **栈内存**：对于局部变量和较小的值类型（如小整数、布尔值），它们通常存储在 **`stack`** 中，栈的大小有限，但访问速度非常快，且不会消耗 gas。
  - **存储机制**：数据存储在 **`stack`** 中时，访问非常高效，但限制较多，适用于小范围变量。

#### 4. **合约的存储数据结构**

- **状态变量**：存储在 **`storage`** 中，所有合约的状态变量都存储在合约的存储中，并且会在每次交易中持久化。
- **临时变量**：存储在 **`memory`** 或 **`stack`** 中，适用于函数内部的临时计算和操作。